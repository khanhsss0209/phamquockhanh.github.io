<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/khanhsss0209/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=khanhsss0209/livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Event Loop là gì trong JavaScript?  | Blog Lập Trình Mạng</title>
<meta name="keywords" content="JavaScript, Event Loop, Async, Programming, Web Development">
<meta name="description" content="Tìm hiểu chi tiết về Event Loop trong JavaScript - cơ chế quan trọng giúp JavaScript xử lý các tác vụ bất đồng bộ một cách hiệu quả">
<meta name="author" content="Phạm Quốc Khánh">
<link rel="canonical" href="http://localhost:1313/khanhsss0209/posts/javascript-event-loop/">
<meta property="og:title" content="Event Loop là gì trong JavaScript?  | Blog Lập Trình Mạng">
<meta property="og:description" content="Tìm hiểu chi tiết về Event Loop trong JavaScript - cơ chế quan trọng giúp JavaScript xử lý các tác vụ bất đồng bộ một cách hiệu quả">
<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/khanhsss0209/posts/javascript-event-loop/">
<meta property="og:image" content="http://localhost:1313/images/og-default.png">
<meta property="og:site_name" content="Blog Lập Trình Mạng">
<meta property="og:locale" content="vi_VN">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Event Loop là gì trong JavaScript?  | Blog Lập Trình Mạng">
<meta name="twitter:description" content="Tìm hiểu chi tiết về Event Loop trong JavaScript - cơ chế quan trọng giúp JavaScript xử lý các tác vụ bất đồng bộ một cách hiệu quả">
<meta name="twitter:image" content="http://localhost:1313/images/og-default.png">
<style>
:root {
   
  --primary-green: #2d5a27;
  --secondary-green: #4a7c59;
  --light-green: #7fb069;
  --accent-green: #98c09a;
  --soft-green: #e8f5e8;
  --dark-green: #1a3d1a;
  
   
  --text-dark: #2c3e50;
  --text-light: #ffffff;
  --text-muted: #6c757d;
  
   
  --background-light: #f8fcf8;
  --background-white: #ffffff;
  
   
  --shadow: rgba(45, 90, 39, 0.1);
  --shadow-hover: rgba(45, 90, 39, 0.2);
  --gradient-primary: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
  --gradient-soft: linear-gradient(135deg, var(--soft-green) 0%, #ffffff 100%);
  
   
  --transition-base: all 0.3s ease;
  --transition-slow: all 0.5s ease;
  
   
  --font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  
   
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  
   
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-full: 9999px;
}

 
@media (prefers-color-scheme: dark) {
  :root {
    --text-dark: #ffffff;
    --text-muted: #a3a3a3;
    --background-light: #1a1a1a;
    --background-white: #2d2d2d;
    --shadow: rgba(0, 0, 0, 0.3);
    --shadow-hover: rgba(0, 0, 0, 0.5);
  }
}

.dark {
  --text-dark: #ffffff;
  --text-muted: #a3a3a3;
  --background-light: #1a1a1a;
  --background-white: #2d2d2d;
  --shadow: rgba(0, 0, 0, 0.3);
  --shadow-hover: rgba(0, 0, 0, 0.5);
}

 
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

body {
  font-family: var(--font-family);
  line-height: 1.6;
  color: var(--text-dark);
  background: var(--background-light);
  transition: var(--transition-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

 
*:focus {
  outline: 2px solid var(--primary-green);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

 
.loading {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease-out forwards;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

 
code {
  font-family: var(--font-mono);
  font-size: 0.9em;
  background: var(--soft-green);
  color: var(--primary-green);
  padding: 0.2em 0.4em;
  border-radius: var(--radius-sm);
  font-weight: 500;
}

pre code {
  background: none;
  color: inherit;
  padding: 0;
  font-weight: normal;
}

 
a {
  color: var(--primary-green);
  text-decoration: none;
  transition: var(--transition-base);
}

a:hover {
  color: var(--secondary-green);
}

 
table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-lg) 0;
  background: var(--background-white);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: 0 4px 15px var(--shadow);
}

th, td {
  padding: var(--space-md);
  text-align: left;
  border-bottom: 1px solid var(--soft-green);
}

th {
  background: var(--primary-green);
  color: var(--text-light);
  font-weight: 600;
}

tr:hover {
  background: var(--soft-green);
}

 
blockquote {
  background: var(--soft-green);
  border-left: 4px solid var(--primary-green);
  padding: var(--space-lg);
  margin: var(--space-xl) 0;
  border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
  font-style: italic;
  position: relative;
}

blockquote::before {
  content: '"';
  font-size: 4rem;
  color: var(--accent-green);
  position: absolute;
  left: var(--space-md);
  top: -10px;
  line-height: 1;
}

 
@media print {
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }
  
  a, a:visited {
    text-decoration: underline;
  }
  
  .no-print {
    display: none !important;
  }
}

 
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  html {
    scroll-behavior: auto;
  }
}
</style>
<link crossorigin="anonymous" href="/khanhsss0209/assets/css/stylesheet.a482bf00fa5c046040ef7973ad5fdf5657890cacb596c93f1382f664ca542074.css" integrity="sha256-pIK/APpcBGBA73lzrV/fVleJDKy1lsk/E4L2ZMpUIHQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/khanhsss0209/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/khanhsss0209/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/khanhsss0209/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/khanhsss0209/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/khanhsss0209/safari-pinned-tab.svg">
<meta name="theme-color" content="#2d5a27">
<meta name="msapplication-TileColor" content="#2d5a27">
<link rel="alternate" hreflang="en" href="http://localhost:1313/khanhsss0209/posts/javascript-event-loop/">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Blog Lập Trình Mạng",
  "description": "Chia sẻ kiến thức về lập trình mạng, Java \u0026 JavaScript",
  "url": "http:\/\/localhost:1313\/khanhsss0209\/",
  "author": {
    "@type": "Person",
    "name": "Phạm Quốc Khánh",
    "email": "noobkhanh@gmail.com",
    "url": "https://github.com/khanhsss0209"
  },
  "sameAs": [
    "https://github.com/khanhsss0209"
  ],
  "potentialAction": {
    "@type": "SearchAction",
    "target": "http:\/\/localhost:1313\/khanhsss0209\//search/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Event Loop là gì trong JavaScript? ",
  "description": "Tìm hiểu chi tiết về Event Loop trong JavaScript - cơ chế quan trọng giúp JavaScript xử lý các tác vụ bất đồng bộ một cách hiệu quả",
  "url": "http:\/\/localhost:1313\/khanhsss0209\/posts\/javascript-event-loop\/",
  "datePublished": "2025-10-23T00:00:00Z",
  "dateModified": "2025-10-23T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "Phạm Quốc Khánh",
    "email": "noobkhanh@gmail.com"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Blog Lập Trình Mạng",
    "logo": {
      "@type": "ImageObject",
      "url": "http:\/\/localhost:1313\/images\/logo.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http:\/\/localhost:1313\/khanhsss0209\/posts\/javascript-event-loop\/"
  },
  "keywords": [
    "JavaScript",
    "Event Loop",
    "Async",
    "Programming",
    "Web Development"
  ]
}
</script>

<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
</noscript>
<script>
if ('serviceWorker' in navigator && location.hostname !== 'localhost') {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      console.log('SW registered: ', registration);
    }).catch(function(registrationError) {
      console.log('SW registration failed: ', registrationError);
    });
  });
}
</script>
    <style>
        :root {
            --primary-green: #2d5a27;
            --secondary-green: #4a7c59;
            --light-green: #7fb069;
            --accent-green: #98c09a;
            --soft-green: #e8f5e8;
            --dark-green: #1a3d1a;
            --text-dark: #2c3e50;
            --text-light: #ffffff;
            --background-light: #f8fcf8;
            --shadow: rgba(45, 90, 39, 0.1);
            --gradient-primary: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            --gradient-soft: linear-gradient(135deg, var(--soft-green) 0%, #ffffff 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--background-light);
            transition: all 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: none;
            margin: 0;
            padding: 0;
        }

         
        .main {
            min-height: calc(100vh - 200px);
            padding: 0;
            width: 100%;
        }
        
         
        .content-wrapper {
            width: 100%;
            padding: 2rem 1rem;
            box-sizing: border-box;
        }

        @media (min-width: 768px) {
            .content-wrapper {
                padding: 2rem 2rem;
            }
        }

        @media (min-width: 1200px) {
            .content-wrapper {
                padding: 2rem 3rem;
            }
        }

        @media (min-width: 1600px) {
            .content-wrapper {
                padding: 2rem 4rem;
            }
        }
        .header {
            background: var(--gradient-primary);
            box-shadow: 0 4px 20px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            padding: 1rem 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 1.8rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .logo a:hover {
            color: var(--accent-green);
            transform: scale(1.05);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary-green);
        }

         
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-menu li a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-menu li a:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--accent-green);
            transition: left 0.3s ease;
            z-index: -1;
        }

        .nav-menu li a:hover:before,
        .nav-menu li a.active:before {
            left: 0;
        }

        .nav-menu li a:hover,
        .nav-menu li a.active {
            color: var(--primary-green);
            transform: translateY(-2px);
        }

         
        .theme-toggle {
            background: var(--accent-green);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: var(--primary-green);
        }

        .theme-toggle:hover {
            transform: rotate(180deg) scale(1.1);
            background: var(--light-green);
        }

         
        .main {
            min-height: calc(100vh - 200px);
            padding: 2rem 0;
        }

         
        .content-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            box-shadow: 0 8px 30px var(--shadow);
            border: 1px solid var(--soft-green);
            transition: all 0.3s ease;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(45, 90, 39, 0.2);
        }

         
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: var(--gradient-primary);
            color: var(--text-light);
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-green);
            border: 2px solid var(--primary-green);
        }

        .btn-outline:hover {
            background: var(--primary-green);
            color: var(--text-light);
        }

         
        .footer {
            background: var(--dark-green);
            color: var(--text-light);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .footer-section a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--accent-green);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--secondary-green);
            opacity: 0.8;
        }

         
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .container {
                padding: 0 15px;
            }

            .content-card {
                padding: 1.5rem;
            }
        }

         
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

         
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--soft-green);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary-green);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-green);
        }

         
        .dark {
            --text-dark: #ffffff;
            --background-light: #1a1a1a;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        .dark .content-card {
            background: #2d2d2d;
            border-color: var(--primary-green);
        }
    </style>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="container">
            <div class="nav-container">
                <div class="logo">
                    <div class="logo-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
                        </svg>
                    </div>
                    <a href="http://localhost:1313/khanhsss0209/" accesskey="h" title="Blog Lập Trình Mạng (Alt + H)">Blog Lập Trình Mạng</a>
                </div>
                <ul class="nav-menu" id="menu">
                    <li>
                        <a href="http://localhost:1313/khanhsss0209/" 
                           title="🏠 Home">🏠 Home
                        </a>
                    </li>
                    <li>
                        <a href="http://localhost:1313/khanhsss0209/posts/" 
                           title="📝 Blog">📝 Blog
                        </a>
                    </li>
                    <li>
                        <a href="http://localhost:1313/khanhsss0209/about/" 
                           title="👤 Giới thiệu">👤 Giới thiệu
                        </a>
                    </li>
                </ul>

                <div class="nav-controls">
                    <button class="theme-toggle" id="theme-toggle" accesskey="t" title="Toggle theme (Alt + T)" aria-label="Toggle theme">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" style="display: none;">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>
</header>

<style>
    .nav-controls {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .lang-switch {
        display: flex;
        list-style: none;
        gap: 0.5rem;
        align-items: center;
    }

    .lang-switch a {
        color: var(--text-light);
        text-decoration: none;
        padding: 0.25rem 0.5rem;
        border-radius: 15px;
        transition: all 0.3s ease;
    }

    .lang-switch a:hover {
        background: var(--accent-green);
        color: var(--primary-green);
    }

     
    .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: var(--text-light);
        cursor: pointer;
        padding: 0.5rem;
    }

    @media (max-width: 768px) {
        .mobile-menu-toggle {
            display: block;
        }

        .nav-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--gradient-primary);
            flex-direction: column;
            padding: 1rem;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .nav-menu.active {
            display: flex;
        }

        .nav-container {
            position: relative;
        }
    }
</style>

<script>
    
    document.addEventListener('DOMContentLoaded', function() {
        const mobileToggle = document.querySelector('.mobile-menu-toggle');
        const navMenu = document.getElementById('menu');
        
        if (mobileToggle && navMenu) {
            mobileToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });
        }

        
        const themeToggle = document.getElementById('theme-toggle');
        const moonIcon = document.getElementById('moon');
        const sunIcon = document.getElementById('sun');
        
        if (themeToggle && moonIcon && sunIcon) {
            function updateIcons() {
                if (document.body.classList.contains('dark')) {
                    moonIcon.style.display = 'none';
                    sunIcon.style.display = 'block';
                } else {
                    moonIcon.style.display = 'block';
                    sunIcon.style.display = 'none';
                }
            }

            themeToggle.addEventListener('click', function() {
                setTimeout(updateIcons, 50);
            });

            updateIcons(); 
        }
    });
</script><main class="main">

<div class="full-width-container">
<header class="post-header">
  <div class="content-wrapper">
    <h1 class="post-title">Event Loop là gì trong JavaScript? </h1>
    <div class="post-description">Tìm hiểu chi tiết về Event Loop trong JavaScript - cơ chế quan trọng giúp JavaScript xử lý các tác vụ bất đồng bộ một cách hiệu quả</div>
    <div class="post-meta">
      <time class="post-date">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        23/10/2025
      </time>
      <div class="post-tags">
        <a href="/tags/javascript" class="tag">JavaScript</a>
        <a href="/tags/event-loop" class="tag">Event Loop</a>
        <a href="/tags/async" class="tag">Async</a>
        <a href="/tags/programming" class="tag">Programming</a>
        <a href="/tags/web-development" class="tag">Web Development</a>
      </div>
      <div class="reading-stats">
        <span class="reading-time">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
          8 phút đọc
        </span>
        <span class="word-count">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
          </svg>
          1434 từ
        </span>
      </div>
    </div>
  </div>
</header>

<article class="post-content-section">
  <div class="content-wrapper">
    <div class="post-content"><h2 id="giới-thiệu">Giới thiệu<a hidden class="anchor" aria-hidden="true" href="#giới-thiệu">#</a></h2>
<p>JavaScript là một ngôn ngữ lập trình <strong>single-threaded</strong> (đơn luồng), nhưng tại sao chúng ta vẫn có thể thực hiện các tác vụ bất đồng bộ như gọi API, xử lý event, hay setTimeout? Câu trả lời nằm ở <strong>Event Loop</strong> - một cơ chế quan trọng và thú vị của JavaScript runtime.</p>
<p>Trong bài viết này, chúng ta sẽ khám phá chi tiết về Event Loop, cách nó hoạt động, và tại sao việc hiểu rõ về nó lại quan trọng đối với mọi JavaScript developer.</p>
<h2 id="event-loop-là-gì">Event Loop là gì?<a hidden class="anchor" aria-hidden="true" href="#event-loop-là-gì">#</a></h2>
<p><strong>Event Loop</strong> là cơ chế giúp JavaScript xử lý các tác vụ bất đồng bộ (asynchronous) mặc dù JavaScript chỉ có một luồng thực thi duy nhất. Nó giống như một &ldquo;người điều phối giao thông&rdquo; kiểm soát việc thực thi code một cách có trật tự.</p>
<h3 id="tại-sao-cần-event-loop">Tại sao cần Event Loop?<a hidden class="anchor" aria-hidden="true" href="#tại-sao-cần-event-loop">#</a></h3>
<p>JavaScript được thiết kế để chạy trên trình duyệt và tương tác với người dùng. Nếu không có Event Loop:</p>
<ul>
<li>Giao diện sẽ bị &ldquo;đóng băng&rdquo; khi thực hiện các tác vụ tốn thời gian</li>
<li>Không thể xử lý nhiều sự kiện cùng lúc</li>
<li>Trải nghiệm người dùng sẽ rất tệ</li>
</ul>
<h2 id="kiến-trúc-javascript-runtime">Kiến trúc JavaScript Runtime<a hidden class="anchor" aria-hidden="true" href="#kiến-trúc-javascript-runtime">#</a></h2>
<p>Để hiểu Event Loop, trước tiên chúng ta cần biết về kiến trúc của JavaScript Runtime:</p>
<h3 id="1-call-stack-ngăn-xếp-gọi-hàm">1. Call Stack (Ngăn xếp gọi hàm)<a hidden class="anchor" aria-hidden="true" href="#1-call-stack-ngăn-xếp-gọi-hàm">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">first</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;First function&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">second</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">second</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Second function&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">third</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">third</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Third function&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">first</span>();
</span></span></code></pre></div><p>Call Stack hoạt động theo nguyên tắc LIFO (Last In, First Out):</p>
<ol>
<li><code>first()</code> được đưa vào stack</li>
<li><code>second()</code> được đưa vào stack</li>
<li><code>third()</code> được đưa vào stack</li>
<li><code>third()</code> hoàn thành, bị loại khỏi stack</li>
<li><code>second()</code> hoàn thành, bị loại khỏi stack</li>
<li><code>first()</code> hoàn thành, bị loại khỏi stack</li>
</ol>
<h3 id="2-web-apis">2. Web APIs<a hidden class="anchor" aria-hidden="true" href="#2-web-apis">#</a></h3>
<p>Trình duyệt cung cấp các Web APIs để xử lý các tác vụ bất đồng bộ:</p>
<ul>
<li><strong>DOM API</strong>: Xử lý sự kiện DOM</li>
<li><strong>Timer API</strong>: setTimeout, setInterval</li>
<li><strong>HTTP API</strong>: XMLHttpRequest, fetch</li>
<li><strong>Promise API</strong>: Promise resolution</li>
</ul>
<h3 id="3-callback-queue-hàng-đợi-callback">3. Callback Queue (Hàng đợi callback)<a hidden class="anchor" aria-hidden="true" href="#3-callback-queue-hàng-đợi-callback">#</a></h3>
<p>Chứa các callback function đang chờ được thực thi:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer callback&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Synchronous code&#39;</span>);
</span></span></code></pre></div><h3 id="4-microtask-queue">4. Microtask Queue<a hidden class="anchor" aria-hidden="true" href="#4-microtask-queue">#</a></h3>
<p>Hàng đợi ưu tiên cao hơn Callback Queue, chứa:</p>
<ul>
<li>Promise callbacks (.then, .catch, .finally)</li>
<li>queueMicrotask()</li>
<li>MutationObserver callbacks</li>
</ul>
<h2 id="cách-event-loop-hoạt-động">Cách Event Loop hoạt động<a hidden class="anchor" aria-hidden="true" href="#cách-event-loop-hoạt-động">#</a></h2>
<p>Event Loop liên tục thực hiện các bước sau:</p>
<h3 id="bước-1-kiểm-tra-call-stack">Bước 1: Kiểm tra Call Stack<a hidden class="anchor" aria-hidden="true" href="#bước-1-kiểm-tra-call-stack">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Start&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timeout&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;End&#39;</span>);
</span></span></code></pre></div><h3 id="bước-2-xử-lý-microtasks">Bước 2: Xử lý Microtasks<a hidden class="anchor" aria-hidden="true" href="#bước-2-xử-lý-microtasks">#</a></h3>
<p>Event Loop ưu tiên xử lý hết tất cả microtasks trước:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;1&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;2&#39;</span>));
</span></span><span style="display:flex;"><span>Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;3&#39;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;4&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Output: 2, 3, 1, 4
</span></span></span></code></pre></div><h3 id="bước-3-xử-lý-macrotasks">Bước 3: Xử lý Macrotasks<a hidden class="anchor" aria-hidden="true" href="#bước-3-xử-lý-macrotasks">#</a></h3>
<p>Sau khi microtask queue trống, xử lý một macrotask:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;=== Start ===&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer 1&#39;</span>);
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise in Timer 1&#39;</span>));
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer 2&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 1&#39;</span>);
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 2&#39;</span>));
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;=== End ===&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Output:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// === Start ===
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// === End ===
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise in Timer 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer 2
</span></span></span></code></pre></div><h2 id="ví-dụ-thực-tế-và-phức-tạp">Ví dụ thực tế và phức tạp<a hidden class="anchor" aria-hidden="true" href="#ví-dụ-thực-tế-và-phức-tạp">#</a></h2>
<h3 id="ví-dụ-1-kết-hợp-settimeout-và-promise">Ví dụ 1: Kết hợp setTimeout và Promise<a hidden class="anchor" aria-hidden="true" href="#ví-dụ-1-kết-hợp-settimeout-và-promise">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">complexExample</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;1&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;2&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#a6e22e">resolve</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;3&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">resolve</span>();
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;4&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;5&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;6&#39;</span>));
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;7&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">complexExample</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Output: 1, 3, 4, 7, 6, 2, 5
</span></span></span></code></pre></div><h3 id="ví-dụ-2-event-handling-và-event-loop">Ví dụ 2: Event handling và Event Loop<a hidden class="anchor" aria-hidden="true" href="#ví-dụ-2-event-handling-và-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// HTML: &lt;button id=&#34;btn&#34;&gt;Click me&lt;/button&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;btn&#39;</span>).<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Click event&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise in click&#39;</span>));
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timeout in click&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Khi click button:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Click event
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise in click
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timeout in click
</span></span></span></code></pre></div><h3 id="ví-dụ-3-nested-promises-và-settimeout">Ví dụ 3: Nested Promises và setTimeout<a hidden class="anchor" aria-hidden="true" href="#ví-dụ-3-nested-promises-và-settimeout">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer 1&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 1&#39;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Nested Promise 1&#39;</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Nested Timer 1&#39;</span>);
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer 1 - Inner&#39;</span>);
</span></span><span style="display:flex;"><span>    }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer 2&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Output:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Nested Promise 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer 1 - Inner
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Nested Timer 1
</span></span></span></code></pre></div><h2 id="những-lỗi-thường-gặp-liên-quan-đến-event-loop">Những lỗi thường gặp liên quan đến Event Loop<a hidden class="anchor" aria-hidden="true" href="#những-lỗi-thường-gặp-liên-quan-đến-event-loop">#</a></h2>
<h3 id="1-blocking-event-loop">1. Blocking Event Loop<a hidden class="anchor" aria-hidden="true" href="#1-blocking-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ❌ Không nên làm - blocking code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">heavyTask</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000000000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">result</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">i</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Before heavy task&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">heavyTask</span>(); <span style="color:#75715e">// Chặn Event Loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;After heavy task&#39;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ✅ Nên làm - non-blocking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">heavyTaskAsync</span>(<span style="color:#a6e22e">callback</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">chunk</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">start</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000000000</span> <span style="color:#f92672">&amp;&amp;</span> Date.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">start</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000000000</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">setTimeout</span>(<span style="color:#a6e22e">chunk</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">callback</span>(<span style="color:#a6e22e">result</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">chunk</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Before heavy task&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">heavyTaskAsync</span>((<span style="color:#a6e22e">result</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Heavy task completed:&#39;</span>, <span style="color:#a6e22e">result</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;After heavy task&#39;</span>);
</span></span></code></pre></div><h3 id="2-promise-hell-và-event-loop">2. Promise Hell và Event Loop<a hidden class="anchor" aria-hidden="true" href="#2-promise-hell-và-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ❌ Hiểu sai về thứ tự thực thi
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 1&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#a6e22e">resolve</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 1 - Timeout&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resolve</span>();
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}).<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise 2&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Independent Timeout&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Output:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Independent Timeout
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 1 - Timeout
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise 2
</span></span></span></code></pre></div><h2 id="debugging-event-loop">Debugging Event Loop<a hidden class="anchor" aria-hidden="true" href="#debugging-event-loop">#</a></h2>
<h3 id="1-sử-dụng-consoletrace">1. Sử dụng console.trace()<a hidden class="anchor" aria-hidden="true" href="#1-sử-dụng-consoletrace">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">debugEventLoop</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Sync code&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">trace</span>(<span style="color:#e6db74">&#39;Sync trace&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timeout&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">trace</span>(<span style="color:#e6db74">&#39;Timeout trace&#39;</span>);
</span></span><span style="display:flex;"><span>    }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Promise&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">trace</span>(<span style="color:#e6db74">&#39;Promise trace&#39;</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">debugEventLoop</span>();
</span></span></code></pre></div><h3 id="2-performance-monitoring">2. Performance monitoring<a hidden class="anchor" aria-hidden="true" href="#2-performance-monitoring">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">measureEventLoop</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">start</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Thêm nhiều tasks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">99</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;All timeouts completed in:&#39;</span>, 
</span></span><span style="display:flex;"><span>                           <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">start</span>, <span style="color:#e6db74">&#39;ms&#39;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Thêm microtasks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        Promise.<span style="color:#a6e22e">resolve</span>().<span style="color:#a6e22e">then</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">99</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;All promises completed in:&#39;</span>, 
</span></span><span style="display:flex;"><span>                           <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">start</span>, <span style="color:#e6db74">&#39;ms&#39;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">measureEventLoop</span>();
</span></span></code></pre></div><h2 id="event-loop-trong-các-môi-trường-khác-nhau">Event Loop trong các môi trường khác nhau<a hidden class="anchor" aria-hidden="true" href="#event-loop-trong-các-môi-trường-khác-nhau">#</a></h2>
<h3 id="nodejs-event-loop">Node.js Event Loop<a hidden class="anchor" aria-hidden="true" href="#nodejs-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Node.js có 6 phases trong Event Loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fs&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Start&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Timer phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setImmediate</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Immediate&#39;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// I/O phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">readFile</span>(<span style="color:#a6e22e">__filename</span>, () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;File read&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timer in I/O&#39;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setImmediate</span>(() =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Immediate in I/O&#39;</span>));
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Close callbacks phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">server</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;http&#39;</span>).<span style="color:#a6e22e">createServer</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;close&#39;</span>, () =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Server closed&#39;</span>));
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;End&#39;</span>);
</span></span></code></pre></div><h3 id="web-workers-và-event-loop">Web Workers và Event Loop<a hidden class="anchor" aria-hidden="true" href="#web-workers-và-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// main.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">worker</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Worker</span>(<span style="color:#e6db74">&#39;worker.js&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">worker</span>.<span style="color:#a6e22e">postMessage</span>({<span style="color:#a6e22e">task</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;heavy-computation&#39;</span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">worker</span>.<span style="color:#a6e22e">onmessage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Result from worker:&#39;</span>, <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Event Loop không bị block bởi worker
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Main thread timer&#39;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">100</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// worker.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">onmessage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">task</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;heavy-computation&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000000000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">i</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">postMessage</span>(<span style="color:#a6e22e">result</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="best-practices">Best Practices<a hidden class="anchor" aria-hidden="true" href="#best-practices">#</a></h2>
<h3 id="1-tránh-blocking-event-loop">1. Tránh blocking Event Loop<a hidden class="anchor" aria-hidden="true" href="#1-tránh-blocking-event-loop">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ✅ Chia nhỏ tasks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">processLargeArray</span>(<span style="color:#a6e22e">array</span>, <span style="color:#a6e22e">batchSize</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">processBatch</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">start</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">index</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">end</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">batchSize</span>, <span style="color:#a6e22e">array</span>.<span style="color:#a6e22e">length</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">start</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">end</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Process array[i]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">array</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">array</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">end</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">index</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">array</span>.<span style="color:#a6e22e">length</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">setTimeout</span>(<span style="color:#a6e22e">processBatch</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">processBatch</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-sử-dụng-đúng-asyncawait">2. Sử dụng đúng async/await<a hidden class="anchor" aria-hidden="true" href="#2-sử-dụng-đúng-asyncawait">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ✅ Hiểu rõ về async/await và Event Loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">optimizedAsyncCode</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;1&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Parallel execution
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">promise1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/api/data1&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">promise2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/api/data2&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;2&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">result1</span>, <span style="color:#a6e22e">result2</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">all</span>([<span style="color:#a6e22e">promise1</span>, <span style="color:#a6e22e">promise2</span>]);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;3&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {<span style="color:#a6e22e">result1</span>, <span style="color:#a6e22e">result2</span>};
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-monitoring-performance">3. Monitoring performance<a hidden class="anchor" aria-hidden="true" href="#3-monitoring-performance">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Performance monitoring
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">monitorEventLoop</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">check</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">currentTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">performance</span>.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">delay</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">currentTime</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">16</span>; <span style="color:#75715e">// Expected 16ms for 60fps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">delay</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">5</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">warn</span>(<span style="color:#e6db74">`Event Loop delay: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">delay</span>.<span style="color:#a6e22e">toFixed</span>(<span style="color:#ae81ff">2</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">ms`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">lastTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">currentTime</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">requestAnimationFrame</span>(<span style="color:#a6e22e">check</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">requestAnimationFrame</span>(<span style="color:#a6e22e">check</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">monitorEventLoop</span>();
</span></span></code></pre></div><h2 id="kết-luận">Kết luận<a hidden class="anchor" aria-hidden="true" href="#kết-luận">#</a></h2>
<p>Event Loop là trái tim của JavaScript, giúp ngôn ngữ này có thể xử lý các tác vụ bất đồng bộ một cách mượt mà. Việc hiểu rõ Event Loop giúp bạn:</p>
<ol>
<li><strong>Viết code hiệu quả hơn</strong>: Tránh blocking Event Loop</li>
<li><strong>Debug dễ dàng hơn</strong>: Hiểu thứ tự thực thi code</li>
<li><strong>Tối ưu performance</strong>: Sử dụng đúng async patterns</li>
<li><strong>Tránh race conditions</strong>: Hiểu rõ timing của các operations</li>
</ol>
<p>Hãy thực hành với các ví dụ trong bài viết này và tiếp tục khám phá các khái niệm nâng cao khác của JavaScript!</p>
<h2 id="tài-liệu-tham-khảo">Tài liệu tham khảo<a hidden class="anchor" aria-hidden="true" href="#tài-liệu-tham-khảo">#</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">MDN: Concurrency model and Event Loop</a></li>
<li><a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/">Node.js Event Loop</a></li>
<li><a href="http://latentflip.com/loupe/">JavaScript Event Loop Visualization</a></li>
</ul>
<hr>
<p><em>Bài viết này là một phần trong series &ldquo;Hiểu sâu về JavaScript&rdquo;. Hãy theo dõi blog để cập nhật những bài viết mới nhất về lập trình web!</em></p>


    </div>
  </div>
</article>

</div>

<style>
   
  .full-width-container {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
    padding: 0;
  }

   
  .content-wrapper {
    width: 100%;
    padding: 0 1rem;
    box-sizing: border-box;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .content-wrapper {
      padding: 0 2rem;
    }
  }

  @media (min-width: 1200px) {
    .content-wrapper {
      padding: 0 3rem;
      max-width: 1400px;
    }
  }

  @media (min-width: 1600px) {
    .content-wrapper {
      padding: 0 4rem;
      max-width: 1600px;
    }
  }

   
  .post-header {
    background: white;
    padding: 3rem 0;
    border-bottom: 1px solid var(--soft-green);
    box-shadow: 0 4px 20px var(--shadow);
  }

  .post-title {
    font-size: 3rem;
    color: var(--primary-green);
    margin-bottom: 1rem;
    font-weight: 700;
    line-height: 1.2;
  }

  .post-description {
    font-size: 1.2rem;
    color: var(--text-dark);
    opacity: 0.8;
    margin-bottom: 2rem;
    line-height: 1.6;
  }

  .post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    align-items: center;
    padding: 1.5rem 0;
    border-top: 1px solid var(--soft-green);
  }

  .post-date {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--secondary-green);
    font-size: 0.95rem;
  }

  .post-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .tag {
    background: var(--accent-green);
    color: var(--primary-green);
    padding: 0.4rem 0.8rem;
    border-radius: 15px;
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .tag:hover {
    background: var(--primary-green);
    color: var(--text-light);
    transform: translateY(-2px);
  }

  .reading-stats {
    display: flex;
    gap: 1.5rem;
    color: var(--secondary-green);
    font-size: 0.9rem;
  }

  .reading-time,
  .word-count {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

   
  .post-cover-section {
    width: 100%;
  }

  .post-cover-full {
    width: 100%;
    height: 400px;
    overflow: hidden;
  }

  .post-cover-full img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

   
  .post-content-section {
    background: white;
    padding: 4rem 0;
  }

  .post-content {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--text-dark);
    max-width: 900px;
    margin: 0 auto;
  }

  .post-content h1,
  .post-content h2,
  .post-content h3,
  .post-content h4 {
    color: var(--primary-green);
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .post-content h1 {
    font-size: 2.5rem;
    border-bottom: 3px solid var(--accent-green);
    padding-bottom: 0.5rem;
  }

  .post-content h2 {
    font-size: 2rem;
    border-left: 4px solid var(--primary-green);
    padding-left: 1rem;
  }

  .post-content h3 {
    font-size: 1.5rem;
    color: var(--secondary-green);
  }

  .post-content p {
    margin-bottom: 1.5rem;
  }

  .post-content ul,
  .post-content ol {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }

  .post-content li {
    margin-bottom: 0.5rem;
  }

  .post-content blockquote {
    background: var(--soft-green);
    border-left: 4px solid var(--primary-green);
    padding: 1.5rem;
    margin: 2rem 0;
    border-radius: 0 10px 10px 0;
    font-style: italic;
  }

  .post-content code {
    background: var(--soft-green);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-family: 'Fira Code', 'Consolas', monospace;
    color: var(--primary-green);
  }

  .post-content pre {
    background: var(--dark-green);
    color: var(--text-light);
    padding: 1.5rem;
    border-radius: 10px;
    overflow-x: auto;
    margin: 2rem 0;
  }

  .post-content pre code {
    background: transparent;
    color: inherit;
    padding: 0;
  }

  .post-content img {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    margin: 2rem 0;
    box-shadow: 0 8px 25px var(--shadow);
  }

  .post-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    overflow-x: auto;
    display: block;
    white-space: nowrap;
  }

  .post-content th,
  .post-content td {
    border: 1px solid var(--soft-green);
    padding: 0.75rem;
    text-align: left;
  }

  .post-content th {
    background: var(--accent-green);
    color: var(--primary-green);
    font-weight: 600;
  }

   
  .post-navigation {
    background: var(--soft-green);
    padding: 3rem 0;
  }

  .post-nav {
    display: flex;
    justify-content: space-between;
    gap: 2rem;
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
    background: white;
    border-radius: 15px;
    text-decoration: none;
    color: var(--text-dark);
    transition: all 0.3s ease;
    flex: 1;
    max-width: 400px;
    box-shadow: 0 4px 15px var(--shadow);
  }

  .nav-link:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px var(--shadow);
  }

  .nav-link.prev {
    margin-right: auto;
  }

  .nav-link.next {
    margin-left: auto;
    flex-direction: row-reverse;
  }

  .nav-content {
    flex: 1;
  }

  .nav-label {
    display: block;
    font-size: 0.85rem;
    color: var(--secondary-green);
    margin-bottom: 0.5rem;
  }

  .nav-title {
    display: block;
    font-weight: 600;
    color: var(--primary-green);
    font-size: 1.1rem;
  }

   
  .related-posts {
    background: white;
    padding: 4rem 0;
    border-top: 1px solid var(--soft-green);
  }

  .related-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--primary-green);
    font-size: 2rem;
    margin-bottom: 3rem;
    font-weight: 600;
    justify-content: center;
  }

  .related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .related-post {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px var(--shadow);
    border: 1px solid var(--soft-green);
  }

  .related-post:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px var(--shadow);
  }

  .related-cover {
    height: 150px;
    overflow: hidden;
  }

  .related-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .related-post:hover .related-cover img {
    transform: scale(1.05);
  }

  .related-content {
    padding: 1.5rem;
  }

  .related-content h4 {
    margin-bottom: 0.5rem;
  }

  .related-content h4 a {
    color: var(--primary-green);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .related-content h4 a:hover {
    color: var(--secondary-green);
  }

  .related-content p {
    color: var(--text-dark);
    opacity: 0.8;
    margin-bottom: 1rem;
    font-size: 0.9rem;
  }

  .related-content time {
    color: var(--secondary-green);
    font-size: 0.85rem;
  }

   
  @media (max-width: 768px) {
    .full-width-container {
      width: 100%;
      margin-left: 0;
      margin-right: 0;
    }

    .content-wrapper {
      padding: 0 1rem;
    }

    .post-title {
      font-size: 2.2rem;
    }

    .post-meta {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }

    .post-cover-full {
      height: 250px;
    }

    .post-nav {
      flex-direction: column;
    }

    .nav-link {
      max-width: none;
    }

    .nav-link.next {
      flex-direction: row;
    }

    .related-grid {
      grid-template-columns: 1fr;
    }

    .post-content {
      font-size: 1rem;
    }

    .post-content h1 {
      font-size: 2rem;
    }

    .post-content h2 {
      font-size: 1.6rem;
    }
  }

  @media (max-width: 480px) {
    .post-title {
      font-size: 1.8rem;
    }

    .related-title {
      font-size: 1.6rem;
      flex-direction: column;
      gap: 0.5rem;
    }

    .post-content table {
      font-size: 0.9rem;
    }
  }
</style>
    </main>
    
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
                    </svg>
                    Blog Lập Trình Mạng
                </h3>
                <p style="margin-bottom: 1rem; opacity: 0.9;">Blog chia sẻ kiến thức lập trình mạng, Java và JavaScript với những bài viết chất lượng và cập nhật.</p>
                <div class="social-links">
                    <a href="mailto:noobkhanh@gmail.com" title="Email" style="margin-right: 1rem;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </a>
                    <a href="https://github.com/khanhsss0209" title="GitHub" target="_blank" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="footer-section">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    Chủ đề chính
                </h3>
                <ul style="list-style: none;">
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/tags/java/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            Lập trình Java
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/tags/javascript/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            JavaScript & Web
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/tags/networking/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            Lập trình mạng
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/tags/http/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            HTTP & API
                        </a>
                    </li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M9 11H1l6-6 6 6z"></path>
                        <path d="M9 17l3 3 3-3"></path>
                        <path d="M22 18.5V2l-5 5-5-5v16.5"></path>
                    </svg>
                    Điều hướng
                </h3>
                <ul style="list-style: none;">
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            </svg>
                            Trang chủ
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/posts/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                            </svg>
                            Bài viết
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/archives/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
                                <polyline points="21,8 21,21 3,21 3,8"></polyline>
                                <rect x="1" y="3" width="22" height="5"></rect>
                                <line x1="10" y1="12" x2="14" y2="12"></line>
                            </svg>
                            Kho bài viết
                        </a>
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <a href="/about/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 16v-4"></path>
                                <path d="M12 8h0"></path>
                            </svg>
                            Giới thiệu
                        </a>
                    </li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                    Công nghệ
                </h3>
                <p style="margin-bottom: 1rem; opacity: 0.9;">Blog được xây dựng với:</p>
                <div class="tech-stack">
                    <span class="tech-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        Hugo
                    </span>
                    <span class="tech-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        PaperMod
                    </span>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
                <span>&copy; 2025 <a href="http://localhost:1313/khanhsss0209/">Blog Lập Trình Mạng</a></span> • 

            <span>
                Được tạo bởi
                <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
                <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
                với ❤️ xanh
            </span>
        </div>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Lên đầu trang (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<style>
    .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .social-links a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: var(--secondary-green);
        border-radius: 50%;
        color: var(--text-light);
        transition: all 0.3s ease;
    }

    .social-links a:hover {
        background: var(--accent-green);
        color: var(--primary-green);
        transform: translateY(-3px);
    }

    .tech-stack {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .tech-item {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        background: var(--secondary-green);
        border-radius: 15px;
        font-size: 0.9rem;
        width: fit-content;
    }

    .top-link {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 50px;
        height: 50px;
        background: var(--gradient-primary);
        color: var(--text-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: 0 4px 15px var(--shadow);
    }

    .top-link.visible {
        opacity: 1;
        visibility: visible;
    }

    .top-link:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(45, 90, 39, 0.3);
    }

    .footer-section ul li {
        transition: all 0.3s ease;
    }

    .footer-section ul li:hover {
        transform: translateX(5px);
    }

    .footer-section h3 {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        font-size: 1.1rem;
        font-weight: 600;
    }

    @media (max-width: 768px) {
        .footer-content {
            grid-template-columns: 1fr;
            text-align: center;
        }

        .social-links {
            justify-content: center;
        }

        .tech-stack {
            align-items: center;
        }

        .top-link {
            bottom: 1rem;
            right: 1rem;
            width: 45px;
            height: 45px;
        }
    }
</style>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.classList.add("visible");
        } else {
            mybutton.classList.remove("visible");
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })
</script><script>
        
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.content-card').forEach(card => {
            observer.observe(card);
        });

        
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark');
                localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
            });

            
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
            }
        }
    </script>
</body>

</html>